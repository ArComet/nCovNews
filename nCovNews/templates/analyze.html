{% extends "layout.html" %}

{% block content %}


<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.7.0/echarts.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
    <script src="https://www.echartsjs.com/examples/vendors/echarts/map/js/world.js"></script>

</head>
<body>
    <!-- 控件测试 -->
    <div class="carousel slide" id="carousel-83435">
        <ol class="carousel-indicators">
            <li data-slide-to="0" data-target="#carousel-83435"></li>
            <li data-slide-to="1" data-target="#carousel-83435"></li>
            <li data-slide-to="2" data-target="#carousel-83435" class="active"></li>
        </ol>
        <div class="carousel-inner">
            <div class="item">
                <div id="main1" style="width: 600px;height:400px; margin: 0 auto;"></div>
                <div class="carousel-caption">
                    <!--<h4>中国现有确诊趋势</h4>-->
                </div>
            </div>
            <div class="item">
                <div id="main2" style="width: 600px;height:400px;margin: 0 auto;"></div>
                <div class="carousel-caption">
                </div>
            </div>
            <div class="item active">
                <div id="main3" style="width: 800px;height:400px;margin: 0 auto;"></div>
                <div class="carousel-caption">
                </div>
            </div>
        </div> <a class="left carousel-control" href="#carousel-83435" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a> <a class="right carousel-control" href="#carousel-83435" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>
    </div>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main4" style="width: 600px;height:400px;margin: 0 auto;"></div>
    <div id="main5" style="width: 600px;height:400px;margin: 0 auto;"></div>
    <div id="main6" style="width: 600px;height:400px;margin: 0 auto;"></div>
    <div id="main7" style="width: 1000px;height:600px;margin: 0 auto;"></div>
    <div id="main8" style="width: 600px;height:400px;margin: 0 auto;"></div>
    <div id="main9" style="width: 600px;height:400px;margin: 0 auto;"></div>
    <div id="main10" style="width: 600px;height:400px;margin: 0 auto;"></div>

    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        $(function () {
            // 基于准备好的dom，初始化echarts实例
            var myChart1 = echarts.init(document.getElementById('main1'));
            var myChart2 = echarts.init(document.getElementById('main2'));
            var myChart3 = echarts.init(document.getElementById('main3'));
            var myChart4 = echarts.init(document.getElementById('main4'));
            var myChart5 = echarts.init(document.getElementById('main5'));
            var myChart6 = echarts.init(document.getElementById('main6'));
            var myChart7 = echarts.init(document.getElementById('main7'));
            var myChart8 = echarts.init(document.getElementById('main8'));
            var myChart9 = echarts.init(document.getElementById('main9'));
            var myChart10 = echarts.init(document.getElementById('main10'));

            $.ajax({
                url: '/getdata',
                success: function (data) {
                    var json_data = JSON.parse(data)
                    // 指定图表的配置项和数据
                    var option1 = {
                        title: {
                            text: '中国现有确诊趋势'
                        },
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: {
                            data: ['现有确诊', '总确诊']
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: json_data['timeseries']
                        },
                        yAxis: {
                            type: 'value'
                        },
                        series: [
                            {
                                name: '现有确诊',
                                type: 'line',
                                data: json_data['china']['confirmedexist']
                            },
                            {
                                name: '总确诊',
                                type: 'line',
                                data: json_data['china']['confirmedtotal']
                            }
                        ]
                    };
                    // 使用刚指定的配置项和数据显示图表。
                    myChart1.setOption(option1);

                    var option2 = {
                        title: {
                            text: '中国累计确诊'
                        },
                        tooltip: {
                            formatter: function (params, ticket, callback) {
                                return params.seriesName + '<br />' + params.name + '：' + params.value
                            }//数据格式化
                        },
                        visualMap: {
                            min: 0,
                            max: 10000,
                            left: '0',
                            bottom: '10',
                            splitNumber: 5,
                            itemWidth: 10,
                            itemHeight: 10,
                            color: ['#610105', '#8e0d08', '#d12d2e', '#fd796a', '#ffad81', '#F8F8FF'],
                            pieces: [
                                { min: 10000 },
                                { min: 1000, max: 9999 },
                                { min: 500, max: 999 },
                                { min: 100, max: 499 },
                                { min: 10, max: 99 },
                                { min: 1, max: 9 },
                                { min: 0, max: 0 }
                            ],

                            show: true//图注
                        },
                        geo: {
                            map: 'china',
                            roam: false,//不开启缩放和平移
                            zoom: 1.23,//视角缩放比例
                            label: {
                                normal: {
                                    show: true,
                                    fontSize: '10',
                                    color: 'rgba(0,0,0,0.7)'
                                }
                            },
                            itemStyle: {
                                normal: {
                                    borderColor: 'rgba(0, 0, 0, 0.2)'
                                },
                                emphasis: {
                                    areaColor: '#F3B329',//鼠标选择区域颜色
                                    shadowOffsetX: 0,
                                    shadowOffsetY: 0,
                                    shadowBlur: 20,
                                    borderWidth: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '累计确诊',
                                type: 'map',
                                geoIndex: 0,
                                data: json_data['map']['confirmedtotal']
                            }
                        ]
                    };
                    myChart2.setOption(option2)

                    var option3 = {
                        title: {
                            text: '全国累计确诊/治愈/死亡趋势'
                        },
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: {
                            data: ['累计确诊', '累计治愈', '累计死亡']
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: json_data['timeseries']
                        },
                        yAxis: {
                            type: 'value'
                        },
                        series: [
                            {
                                name: '累计确诊',
                                type: 'line',
                                data: json_data['china']['confirmedtotal']
                            },
                            {
                                name: '累计治愈',
                                type: 'line',
                                data: json_data['china']['cures']
                            },
                            {
                                name: '累计死亡',
                                type: 'line',
                                data: json_data['china']['deaths']
                            }
                        ]
                    };
                    myChart3.setOption(option3)

                    var option4 = {
                        title: {
                            text: '全国疫情新增趋势'
                        },
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: {
                            data: ['新增确诊', '新增疑似']
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: json_data['timeseries']
                        },
                        yAxis: {
                            type: 'value'
                        },
                        series: [
                            {
                                name: '新增确诊',
                                type: 'line',
                                data: json_data['chinaInc']['confirmedtotal']
                            },
                            {
                                name: '新增疑似',
                                type: 'line',
                                data: json_data['chinaInc']['suspected']
                            }

                        ]
                    };
                    myChart4.setOption(option4)

                    var option5 = {
                        title: {
                            text: '中国现存确诊'
                        },
                        tooltip: {
                            formatter: function (params, ticket, callback) {
                                return params.seriesName + '<br />' + params.name + '：' + params.value
                            }//数据格式化
                        },
                        visualMap: {
                            min: 0,
                            max: 10000,
                            left: '0',
                            bottom: '10',
                            splitNumber: 5,
                            itemWidth: 10,
                            itemHeight: 10,
                            color: ['#610105', '#8e0d08', '#d12d2e', '#fd796a', '#ffad81', '#F8F8FF'],
                            pieces: [
                                { min: 10000 },
                                { min: 1000, max: 9999 },
                                { min: 500, max: 999 },
                                { min: 100, max: 499 },
                                { min: 10, max: 99 },
                                { min: 1, max: 9 },
                                { min: 0, max: 0 }
                            ]
                        },
                        geo: {
                            map: 'china',
                            roam: false,//不开启缩放和平移
                            zoom: 1.23,//视角缩放比例
                            label: {
                                normal: {
                                    show: true,
                                    fontSize: '10',
                                    color: 'rgba(0,0,0,0.7)'
                                }
                            },
                            itemStyle: {
                                normal: {
                                    borderColor: 'rgba(0, 0, 0, 0.2)'
                                },
                                emphasis: {
                                    areaColor: '#F3B329',//鼠标选择区域颜色
                                    shadowOffsetX: 0,
                                    shadowOffsetY: 0,
                                    shadowBlur: 20,
                                    borderWidth: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '现存确诊',
                                type: 'map',
                                geoIndex: 0,
                                data: json_data['map']['confirmedexist']
                            }
                        ]
                    };
                    myChart5.setOption(option5)
                    var option6 = {
                        title: {
                            text: '中国现有确诊趋势预测'
                        },
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: {
                            data: ['确诊预测', '累计确诊']
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: json_data['predictseries']
                        },
                        yAxis: {
                            type: 'value'
                        },
                        series: [
                            {
                                name: '确诊预测',
                                type: 'line',
                                data: json_data['chinaPredict']['confirmedtotal']
                            },
                            {
                                name: '累计确诊',
                                type: 'line',
                                data: json_data['china']['confirmedtotal']
                            }
                        ]
                    };
                    // 使用刚指定的配置项和数据显示图表。
                    myChart6.setOption(option6);

                    var option7 = {
                        title: {
                            text: '世界累计确诊(除中国)'
                        },
                        tooltip: {
                            formatter: function (params, ticket, callback) {
                                return params.seriesName + '<br />' + params.name + '：' + params.value
                            }//数据格式化
                        },
                        visualMap: {
                            min: 0,
                            max: 10000,
                            left: '0',
                            bottom: '10',
                            splitNumber: 5,
                            itemWidth: 10,
                            itemHeight: 10,
                            color: ['#610105', '#8e0d08', '#d12d2e', '#fd796a', '#ffad81', '#F8F8FF'],
                            pieces: [
                                { min: 1000000 },
                                { min: 100000, max: 999999 },
                                { min: 10000, max: 99999 },
                                { min: 1000, max: 9999 },
                                { min: 500, max: 999 },
                                { min: 100, max: 499 },
                                { min: 10, max: 99 },
                                { min: 1, max: 9 },
                                { min: 0, max: 0 }
                            ],

                            show: true//图注
                        },
                        geo: {
                            map: 'world',
                            roam: false,//不开启缩放和平移
                            zoom: 1.23,//视角缩放比例
                            label: {
                                normal: {
                                    show: false,
                                    fontSize: '10',
                                    color: 'rgba(0,0,0,0.7)'
                                }
                            },
                            itemStyle: {
                                normal: {
                                    borderColor: 'rgba(0, 0, 0, 0.2)'
                                },
                                emphasis: {
                                    areaColor: '#F3B329',//鼠标选择区域颜色
                                    shadowOffsetX: 0,
                                    shadowOffsetY: 0,
                                    shadowBlur: 20,
                                    borderWidth: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '累计确诊',
                                type: 'map',
                                geoIndex: 0,
                                data: json_data['worldmap']['confirmedtotal']
                            }
                        ]

                    }
                    myChart7.setOption(option7);
                    var option8 = {
                        title: {
                            text: '全国治愈率/病死率趋势'
                        },
                        tooltip: {
                            trigger: 'axis',
                            show: true,
                            formatter: '{b0}<br/>{a0}: {c0}%<br />{a1}: {c1}% ',
                        },

                        legend: {
                            data: ['治愈率', '病死率']
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: json_data['timeseries']
                        },
                        yAxis: {
                            type: 'value',
                            axisLabel: {
                                show: true,
                                formatter: '{value}%'
                            },
                        },
                        series: [
                            {
                                name: '治愈率',
                                type: 'line',
                                data: json_data['chinaPercent']['cures']
                            },
                            {
                                name: '病死率',
                                type: 'line',
                                data: json_data['chinaPercent']['deaths'],
                            },

                        ]
                    };
                    // 使用刚指定的配置项和数据显示图表。
                    myChart8.setOption(option8);
                    option9 = {
                        title: {
                            text: '海外多国累计确诊top10'
                        },
                        legend: {},
                        tooltip: {},
                        xAxis: {
                            type: 'category',
                            data: json_data['worldTop']['confirmedtotal']['name'],
                        },
                        yAxis: {
                            type: 'value'
                        },
                        series: [{
                            name: '累计确诊',
                            data: json_data['worldTop']['confirmedtotal']['value'],
                            type: 'bar'
                        }]
                    };
                    myChart9.setOption(option9);
                    option10 = {
                        title: {
                            text: '海外多国现存确诊top10'
                        },
                        legend: {},
                        tooltip: {},
                        xAxis: {
                            type: 'category',
                            data: json_data['worldTop']['confirmedexist']['name'],
                        },
                        yAxis: {
                            type: 'value'
                        },
                        series: [{
                            name: '现存确诊',
                            data: json_data['worldTop']['confirmedexist']['value'],
                            type: 'bar'
                        }]
                    };
                    myChart10.setOption(option10);
                },//success末尾

            })
            //ajax末尾

        })//function末尾
    </script>
</body>
</html>

{% endblock %}
