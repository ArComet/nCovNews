{% extends "layout.html" %}

{% block content %}


<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.7.0/echarts.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>

    <style>
        #mp1 {
            color: dodgerblue;
        }

        #mp2 {
            color: black;
        }

        #mp3 {
            color: black;
        }
        .map-s1 {
            font-size :30px;
            font-weight :600 ;
            top: 7%;
            opacity: 1;          
            width: 75%;
        }
    </style>

</head>

<body>

<div  class="map-s1" >
    <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
            <li ><a  onclick="mapck1()"><p id="mp1">第一部分</p></a></li>
            <li ><a onclick="mapck2()"><p id="mp2">第二部分</p></a></li>
            <li ><a  onclick="mapck3()"><p id="mp3">第三部分</p></a></li>
        </ul>
    </div>
</div>

 <div id="map1" style=" display:block;">
        <h style=" font-size :30px;color :black;"> 第一部分</h><br />
        <div class="carousel slide" id="carousel-555517" style=" background-color :aliceblue">
            <ol class="carousel-indicators">
                <li class="active" data-slide-to="0" data-target="#carousel-555517">
                </li>
                <li data-slide-to="1" data-target="#carousel-555517">
                </li>
                <li data-slide-to="2" data-target="#carousel-555517">
                </li>
            </ol>
            <div class="carousel-inner">
                <div class="item active">
                    <div id="main1" style="width: 800px;height:460px; margin: 0 auto;"></div>
                    <div class="carousel-caption">
                    </div>
                </div>
                <div class="item">
                    <div id="main2" style="width: 800px;height:460px; margin: 0 auto;"></div>
                    <div class="carousel-caption">
                    </div>
                </div>
                <div class="item">
                    <div id="main3" style="width: 800px;height:460px; margin: 0 auto;"></div>
                    <div class="carousel-caption">
                    </div>
                </div>
            </div> <a data-slide="prev" href="#carousel-555517" class="left carousel-control"><span class="glyphicon glyphicon-chevron-left"></span></a> <a data-slide="next" href="#carousel-555517" class="right carousel-control"><span class="glyphicon glyphicon-chevron-right"></span></a>
        </div>
</div>



<div id="map2" style=" display :none;">
    <h style=" font-size :30px;color :black;"> 第二部分</h><br />
    <div class="carousel slide" id="carousel-687778" style=" background-color :aliceblue">
        <ol class="carousel-indicators">
            <li class="active" data-slide-to="0" data-target="#carousel-687778">
            </li>
            <li data-slide-to="1" data-target="#carousel-687778">
            </li>
            <li data-slide-to="2" data-target="#carousel-687778">
            </li>
        </ol>
        <div class="carousel-inner">
            <div class="item active">
                <div id="main4" style="width: 800px; height: 460px; margin: 0 auto;"></div>
                <div class="carousel-caption">
                </div>
            </div>
            <div class="item">
                <div id="main5" style="width: 800px; height: 460px; margin: 0 auto;"></div>
                <div class="carousel-caption">
                </div>
            </div>
            <div class="item">
                <div id="main6" style="width: 800px; height: 460px; margin: 0 auto;"></div>
                <div class="carousel-caption">
                </div>
            </div>
        </div> <a data-slide="prev" href="#carousel-687778" class="left carousel-control"><span class="glyphicon glyphicon-chevron-left"></span></a> <a data-slide="next" href="#carousel-687778" class="right carousel-control"><span class="glyphicon glyphicon-chevron-right"></span></a>
    </div>
</div>



<div id="map3" style=" display :none; ">
    <h style=" font-size :30px;color :black;"> 第三部分</h><br />
    <div class="carousel slide" id="carousel-290865" style=" background-color :aliceblue">
        <ol class="carousel-indicators">
            <li class="active" data-slide-to="0" data-target="#carousel-290865">
            </li>
            <li data-slide-to="1" data-target="#carousel-290865">
            </li>
            <li data-slide-to="2" data-target="#carousel-290865">
            </li>
        </ol>
        <div class="carousel-inner">
            <div class="item active">
                <img alt="" src="/static/images/china2.jpg" style="width: 800px; height: 460px; margin: 0 auto;"  />
                <div class="carousel-caption">
                    <h4>
                        第一张
                    </h4>
                </div>
            </div>
            <div class="item">
                <img alt="" src="/static/images/china3.jpg" style="width: 800px; height: 460px; margin: 0 auto;" />
                <div class="carousel-caption">
                    <h4>
                        第二张
                    </h4>
                </div>
            </div>
            <div class="item">
                <img alt="" src="/static/images/china4.jpg" style="width: 800px; height: 460px; margin: 0 auto;"  />
                <div class="carousel-caption">
                    <h4>
                        第三张
                    </h4>
                </div>
            </div>
        </div> <a data-slide="prev" href="#carousel-290865" class="left carousel-control"><span class="glyphicon glyphicon-chevron-left"></span></a> <a data-slide="next" href="#carousel-290865" class="right carousel-control"><span class="glyphicon glyphicon-chevron-right"></span></a>
    </div>
</div>

  
  
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->

<script>
    function mapck1() {
        map1.style.display = "block";
        map2.style.display = "none";
        map3.style.display = "none";
        mp1.style.color = "dodgerblue";
        mp2.style.color = "black";
        mp3.style.color = "black";

    }
    function mapck2() {
        map1.style.display = "none";
        map2.style.display = "block";
        map3.style.display = "none";
        mp2.style.color = "dodgerblue";
        mp1.style.color = "black";
        mp3.style.color = "black";

    }
    function mapck3() {
        map1.style.display = "none";
        map2.style.display = "none";
        map3.style.display = "block";
        mp3.style.color = "dodgerblue";
        mp2.style.color = "black";
        mp1.style.color = "black";

    }
</script>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        $(function () {
            // 基于准备好的dom，初始化echarts实例
            var myChart1 = echarts.init(document.getElementById('main1'));
            var myChart2 = echarts.init(document.getElementById('main2'));
            var myChart3 = echarts.init(document.getElementById('main3'));
            var myChart4 = echarts.init(document.getElementById('main4'));
            var myChart5 = echarts.init(document.getElementById('main5'));
            var myChart6 = echarts.init(document.getElementById('main6'));

            $.ajax({
                url: '/getdata',
                success: function (data) {
                    var json_data = JSON.parse(data)
                    console.info(json_data['china']['confirmedxist'])
                    console.info(json_data['timeseries'])
                    console.info(json_data['map']['confirmedtotal'])
                    console.info(json_data['china']['cures'])
                    console.info(json_data['china']['confirmedtotal'])
                    console.info(json_data['china']['deaths'])
                    console.info(json_data['chinaInc']['confirmedtotal'])
                    console.info(json_data['chinaInc']['suspected'])
                    console.info(json_data['map']['confirmedexist'])
                    console.info(json_data['chinaPredict']['confirmedexist'])
                    console.info(json_data['chinaPredict']['confirmedtotal'])
                    console.info(json_data['predictseries'])

                    // 指定图表的配置项和数据
                    var option1 = {
                        title: {
                            text: '中国现有确诊趋势'
                        },
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: {
                            data: ['现有确诊']
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: json_data['timeseries']
                        },
                        yAxis: {
                            type: 'value'
                        },
                        series: [
                            {
                                name: '现有确诊',
                                type: 'line',
                                data: json_data['china']['confirmedexist']
                            },
                            {
                                name: '总确诊',
                                type: 'line',
                                data: json_data['china']['confirmedtotal']
                            }
                        ]
                    };
                    // 使用刚指定的配置项和数据显示图表。
                    myChart1.setOption(option1);

                    var option2 = {
                        title: {
                            text: '中国累计确诊'
                        },
                        tooltip: {
                            formatter: function (params, ticket, callback) {
                                return params.seriesName + '<br />' + params.name + '：' + params.value
                            }//数据格式化
                        },
                        visualMap: {
                            min: 0,
                            max: 10000,
                            left: '0',
                            bottom: '10',
                            splitNumber: 5,
                            itemWidth: 10,
                            itemHeight: 10,
                            color: ['#610105', '#8e0d08', '#d12d2e', '#fd796a', '#ffad81', '#F8F8FF'],
                            pieces: [
                                { min: 10000 },
                                { min: 1000, max: 9999 },
                                { min: 500, max: 999 },
                                { min: 100, max: 499 },
                                { min: 10, max: 99 },
                                { min: 1, max: 9 },
                                { min: 0, max: 0 }
                            ],

                            show: true//图注
                        },
                        geo: {
                            map: 'china',
                            roam: false,//不开启缩放和平移
                            zoom: 1.23,//视角缩放比例
                            label: {
                                normal: {
                                    show: true,
                                    fontSize: '10',
                                    color: 'rgba(0,0,0,0.7)'
                                }
                            },
                            itemStyle: {
                                normal: {
                                    borderColor: 'rgba(0, 0, 0, 0.2)'
                                },
                                emphasis: {
                                    areaColor: '#F3B329',//鼠标选择区域颜色
                                    shadowOffsetX: 0,
                                    shadowOffsetY: 0,
                                    shadowBlur: 20,
                                    borderWidth: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '累计确诊',
                                type: 'map',
                                geoIndex: 0,
                                data: json_data['map']['confirmedtotal']
                            }
                        ]
                    };
                    myChart2.setOption(option2)

                    var option3 = {
                        title: {
                            text: '全国累计确诊/治愈/死亡趋势'
                        },
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: {
                            data: ['累计确诊', '累计治愈', '累计死亡']
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: json_data['timeseries']
                        },
                        yAxis: {
                            type: 'value'
                        },
                        series: [
                            {
                                name: '累计确诊',
                                type: 'line',
                                data: json_data['china']['confirmedtotal']
                            },
                            {
                                name: '累计治愈',
                                type: 'line',
                                data: json_data['china']['cures']
                            },
                            {
                                name: '累计死亡',
                                type: 'line',
                                data: json_data['china']['deaths']
                            }
                        ]
                    };
                    myChart3.setOption(option3)

                    var option4 = {
                        title: {
                            text: '全国疫情新增趋势'
                        },
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: {
                            data: ['新增确诊', '新增疑似']
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: json_data['timeseries']
                        },
                        yAxis: {
                            type: 'value'
                        },
                        series: [
                            {
                                name: '新增确诊',
                                type: 'line',
                                data: json_data['chinaInc']['confirmedtotal']
                            },
                            {
                                name: '新增疑似',
                                type: 'line',
                                data: json_data['chinaInc']['suspected']
                            }

                        ]
                    };
                    myChart4.setOption(option4)

                    var option5 = {
                        title: {
                            text: '中国现存确诊'
                        },
                        tooltip: {
                            formatter: function (params, ticket, callback) {
                                return params.seriesName + '<br />' + params.name + '：' + params.value
                            }//数据格式化
                        },
                        visualMap: {
                            min: 0,
                            max: 10000,
                            left: '0',
                            bottom: '10',
                            splitNumber: 5,
                            itemWidth: 10,
                            itemHeight: 10,
                            color: ['#610105', '#8e0d08', '#d12d2e', '#fd796a', '#ffad81', '#F8F8FF'],
                            pieces: [
                                { min: 10000 },
                                { min: 1000, max: 9999 },
                                { min: 500, max: 999 },
                                { min: 100, max: 499 },
                                { min: 10, max: 99 },
                                { min: 1, max: 9 },
                                { min: 0, max: 0 }
                            ]
                        },
                        geo: {
                            map: 'china',
                            roam: false,//不开启缩放和平移
                            zoom: 1.23,//视角缩放比例
                            label: {
                                normal: {
                                    show: true,
                                    fontSize: '10',
                                    color: 'rgba(0,0,0,0.7)'
                                }
                            },
                            itemStyle: {
                                normal: {
                                    borderColor: 'rgba(0, 0, 0, 0.2)'
                                },
                                emphasis: {
                                    areaColor: '#F3B329',//鼠标选择区域颜色
                                    shadowOffsetX: 0,
                                    shadowOffsetY: 0,
                                    shadowBlur: 20,
                                    borderWidth: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '信息量',
                                type: 'map',
                                geoIndex: 0,
                                data: json_data['map']['confirmedexist']
                            }
                        ]
                    };
                    myChart5.setOption(option5)
                    var option6 = {
                        title: {
                            text: '中国现有确诊趋势预测'
                        },
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: {
                            data: ['确诊预测']
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: json_data['predictseries']
                        },
                        yAxis: {
                            type: 'value'
                        },
                        series: [
                            {
                                name: '确诊预测',
                                type: 'line',
                                data: json_data['chinaPredict']['confirmedtotal']
                            }
                        ]
                    };
                    // 使用刚指定的配置项和数据显示图表。
                    myChart6.setOption(option6);
                },//success末尾

            })
            //ajax末尾

        })//function末尾
    </script>
</body>
</html>

{% endblock %}
